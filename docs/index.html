<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Easy Computation of Marketing Metrics with Different Analysis Axis  â€¢ mmetrics</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Easy Computation of Marketing Metrics with Different Analysis Axis ">
<meta property="og:description" content="Provides a mechanism for easy computation of marketing metrics.
  By default in this package, metrics for digital marketing (e.g. CTR (Click Through Rate), CVR (Conversion Rate), CPC (Cost Per Click) etc) are calculated but you can define your own metrics easily.
  In addition to that, you can change an analysis axis to calculate these metrics.">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">mmetrics</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/introduction.html">Introduction to {mmetrics} package</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/y-bar/mmetrics">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="mmetrics" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#mmetrics" class="anchor"></a>mmetrics <a href="https://y-bar.github.io/mmetrics/"><img src="reference/figures/logo.png" align="right" height="139"></a>
</h1></div>

<p>Easy Computation of Marketing Metrics with Different Analysis Axis.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of {mmetrics} from CRAN with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"mmetrics"</span>)</a></code></pre></div>
<p>Or install the development version from github with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">remotes<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/remotes/topics/install_github">install_github</a></span>(<span class="st">"y-bar/mmetrics"</span>)</a></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<div id="load-dummy-data" class="section level3">
<h3 class="hasAnchor">
<a href="#load-dummy-data" class="anchor"></a>Load Dummy data</h3>
<p>First, we load dummy data from {mmetrics} package for this example.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">df &lt;-<span class="st"> </span>mmetrics<span class="op">::</span>dummy_data</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">df</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt;    gender age cost impression click conversion</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; 1       M  10   51        101     0          0</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; 2       F  20   52        102     3          1</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; 3       M  30   53        103     6          2</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; 4       F  40   54        104     9          3</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; 5       M  50   55        105    12          4</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; 6       F  60   56        106    15          5</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; 7       M  70   57        107    18          6</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt; 8       F  80   58        108    21          7</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt; 9       M  90   59        109    24          8</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt; 10      F 100   60        110    27          9</span></a></code></pre></div>
</div>
<div id="define-metrics" class="section level3">
<h3 class="hasAnchor">
<a href="#define-metrics" class="anchor"></a>Define metrics</h3>
<p>As a next step, we define metrics to evaluate using <code><a href="reference/define.html">mmetrics::define</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Example metrics</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">metrics &lt;-<span class="st"> </span>mmetrics<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/mmetrics/topics/define">define</a></span>(</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">  <span class="dt">cost =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(cost),</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">  <span class="dt">ctr  =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(click)<span class="op">/</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(impression) <span class="co"># CTR, Click Through Rate </span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">)</a></code></pre></div>
</div>
<div id="just-call-mmetricsadd" class="section level3">
<h3 class="hasAnchor">
<a href="#just-call-mmetricsadd" class="anchor"></a>Just call <code><a href="reference/add.html">mmetrics::add()</a></code> !</h3>
<p>Call <code><a href="reference/add.html">mmetrics::add()</a></code> with grouping key (here <code>gender</code>) then we will get new <code>data.frame</code> with defined metrics.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">mmetrics<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/mmetrics/topics/add">add</a></span>(df, gender, <span class="dt">metrics =</span> metrics)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt; # A tibble: 2 x 3</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt;   gender  cost   ctr</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt;   &lt;fct&gt;  &lt;int&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; 1 F        280 0.142</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; 2 M        275 0.114</span></a></code></pre></div>
</div>
<div id="remove-aggregate-function-from-metrics-using-mmetricsdisaggregate" class="section level3">
<h3 class="hasAnchor">
<a href="#remove-aggregate-function-from-metrics-using-mmetricsdisaggregate" class="anchor"></a>Remove aggregate function from metrics using <code><a href="reference/disaggregate.html">mmetrics::disaggregate()</a></code>
</h3>
<p>It is hassle for users to re-define metrics when you would like to use these for <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">dplyr::mutate()</a></code>. In this case, you can use <code><a href="reference/disaggregate.html">mmetrics::disaggregate()</a></code> to remove <em>the first aggregation function</em> for the argument and return disaggregated metrics.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Original metrics. sum() is used for this metrics</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">metrics</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; &lt;list_of&lt;quosure&gt;&gt;</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; $cost</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; &lt;quosure&gt;</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; expr: ^sum(cost)</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; env:  global</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt; $ctr</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt; &lt;quosure&gt;</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt; expr: ^sum(click) / sum(impression)</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt; env:  global</span></a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Disaggregate metrics!</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">metrics_disaggregated &lt;-<span class="st"> </span>mmetrics<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/mmetrics/topics/disaggregate">disaggregate</a></span>(metrics)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co"># Woo! sum() are removed!!!</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">metrics_disaggregated</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; $cost</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; &lt;quosure&gt;</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; expr: ^cost</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; env:  global</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; $ctr</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; &lt;quosure&gt;</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt; expr: ^click / impression</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt; env:  global</span></a></code></pre></div>
<p>You can use these metrics with <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">dplyr::mutate()</a></code> for row-wise metrics computation.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(df, <span class="op">!!!</span>metrics_disaggregated)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt;    gender age cost impression click conversion        ctr</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; 1       M  10   51        101     0          0 0.00000000</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; 2       F  20   52        102     3          1 0.02941176</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt; 3       M  30   53        103     6          2 0.05825243</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt; 4       F  40   54        104     9          3 0.08653846</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; 5       M  50   55        105    12          4 0.11428571</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; 6       F  60   56        106    15          5 0.14150943</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt; 7       M  70   57        107    18          6 0.16822430</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt; 8       F  80   58        108    21          7 0.19444444</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt; 9       M  90   59        109    24          8 0.22018349</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt; 10      F 100   60        110    27          9 0.24545455</span></a></code></pre></div>
<p>â€¦or, you can do the same compucation using <code><a href="reference/add.html">mmetrics::gmutate()</a></code> defind in our package. In this case, you do not need to write <code>!!!</code> (bang-bang-bang) operator explicitly.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">mmetrics<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/mmetrics/topics/add">gmutate</a></span>(df, <span class="dt">metrics =</span> metrics_disaggregated)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt; # A tibble: 10 x 7</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt;    gender   age  cost impression click conversion    ctr</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt;    &lt;fct&gt;  &lt;dbl&gt; &lt;int&gt;      &lt;int&gt; &lt;dbl&gt;      &lt;int&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt;  1 M         10    51        101     0          0 0     </span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt;  2 F         20    52        102     3          1 0.0294</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt;  3 M         30    53        103     6          2 0.0583</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt;  4 F         40    54        104     9          3 0.0865</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt;  5 M         50    55        105    12          4 0.114 </span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt;  6 F         60    56        106    15          5 0.142 </span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co">#&gt;  7 M         70    57        107    18          6 0.168 </span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="co">#&gt;  8 F         80    58        108    21          7 0.194 </span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">#&gt;  9 M         90    59        109    24          8 0.220 </span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">#&gt; 10 F        100    60        110    27          9 0.245</span></a></code></pre></div>
</div>
</div>
<div id="more-examples" class="section level2">
<h2 class="hasAnchor">
<a href="#more-examples" class="anchor"></a>More examples</h2>
<ul>
<li>As a first step, see the vignettes <a href="https://y-bar.github.io/mmetrics/articles/introduction.html">Introduction to {mmetrics} package</a>
</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=mmetrics">https://â€‹cloud.r-project.org/â€‹package=mmetrics</a>
</li>
<li>Browse source code at <br><a href="https://github.com/y-bar/mmetrics">https://â€‹github.com/â€‹y-bar/â€‹mmetrics</a>
</li>
<li>Report a bug at <br><a href="https://github.com/y-bar/mmetrics/issues">https://â€‹github.com/â€‹y-bar/â€‹mmetrics/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Shinichi Takayanagi <br><small class="roles"> Author, maintainer </small>  </li>
<li>Nagi Teramo <br><small class="roles"> Author </small>  </li>
<li>Takahiro Yoshinaga <br><small class="roles"> Author </small>  </li>
<li>Yanjin Li <br><small class="roles"> Author </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.com/y-bar/mmetrics"><img src="https://api.travis-ci.com/y-bar/mmetrics.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://cran.r-project.org/package=mmetrics"><img src="https://www.r-pkg.org/badges/version/mmetrics" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://codecov.io/github/y-bar/mmetrics"><img src="https://codecov.io/github/y-bar/mmetrics/branch/master/graphs/badge.svg" alt="codecov"></a></li>
<li><a href="https://github.com/y-bar/mmetrics/blob/master/LICENSE"><img src="https://img.shields.io/cran/l/mmetrics.svg" alt="Licence"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Shinichi Takayanagi, Nagi Teramo, Takahiro Yoshinaga, Yanjin Li.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
